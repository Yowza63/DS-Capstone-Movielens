---

title: "MovieLens Ratings Prediction Project Report"
author: "Becky Johnson"
date: "1/22/2021"
fontsize: 12pt
geometry: margin = .5in
output:
  pdf_document:
    toc: true
    toc_depth: 2
    toc_float: true
    number_sections: true
    fig_width: 7
    fig_height: 6
    fig_caption: true
    df_print: kable
    
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# An enhanced version of data frames
if(!require(data.table)) install.packages("data.table", repos = "http://cran.us.r-project.org")
# Basic data science capabilities
if(!require(tidyverse)) install.packages("tidyverse", repos = "http://cran.us.r-project.org")
# Streamlines model training process for complex regression and classification problems
if(!require(caret)) install.packages("caret", repos = "http://cran.us.r-project.org")
# Character string processing
if(!require(stringi)) install.packages("stringi", repos = "http://cran.us.r-project.org")
# Build html friendly tables
if(!require(kableExtra)) install.packages("kableExtra", repos = "http://cran.us.r-project.org")
# Graphing tools
if(!require(ggplot2)) install.packages("ggplot2", repos = "http://cran.us.r-project.org")
# Data manipulation tools
if(!require(dplyr)) install.packages("dplyr", repos = "http://cran.us.r-project.org")
# Working with dates
if(!require(lubridate)) install.packages("lubridate", repos = "http://cran.us.r-project.org")
# Data exploration
if(!require(dlookr)) install.packages("dlookr", repos = "http://cran.us.r-project.org")
# Formatting for graphs
if(!require(hrbrthemes)) install.packages("hrbrthemes", repos = "http://cran.us.r-project.org")
# Includes the helpful percent.table function
if(!require(sur)) install.packages("sur", repos = "http://cran.us.r-project.org")
# Matrix factoization tool
if(!require(recosystem)) install.packages("recosystem", repos = "http://cran.us.r-project.org")

```

# Introduction
Recommendation systems are used nearly everywhere in the world of online shopping and online viewing. Amazon uses these types of models to suggest items we may wish to purchase based on our past buying behavior or purchases other customers have made who have similar buying patterns to ours. Netflix uses them to suggest movies or series we might enjoy. Goodreads suggest books I might want to read based on my past reading behavior and my "To Read" list. 

In Data Science courses, learning to build a recommendation system is a foundational project. This specific project is the first of two required to complete the HarvardX Data Science Capstone course on the edX.org platform. Here, we create a recommendation system to predict how a user will rate a specific movie using data available on the grouplens.org site. 

## Project Overview
This project will build a movie ratings predictive model using the Movielens dataset.

Once the problem statement has been clearly defined, there are 5 steps in this process of building the model:

1. Identify the data, wrangle the data into a workable dataset
2. Explore/visualize the data
3. Fit a model using several techniques to find a model that minimizes the error between actual and predicted values
4. Assess the model using a "hold back" dataset
5. Draw conclusions and suggest further analysis

# Data needed to answer the question. This section describes the code in 0_MovieLens_Data_Wrangling.R
We start with the 10M MovieLens dataset available on the Grouplens.org site maintained by the University of Minnesota. This database includes 10 million ratings and 100,000 tag applications applied to 10,000 movies by 72,000 users. It was released 1/2009. 

The README.txt for this dataset is found here:
http://files.grouplens.org/datasets/movielens/ml-10m-README.html

The data can be found here:
https://grouplens.org/datasets/movielens/10m/

Citation for dataset:  F. Maxwell Harper and Joseph A. Konstan. 2015. The MovieLens Datasets: History and Context. ACM Transactions on Interactive Intelligent Systems (TiiS) 5, 4, Article 19 (December 2015), 19 pages. DOI=http://dx.doi.org/10.1145/2827872

## Create the dataframes for training and validation 
We first created the movielens dataframe with columns "userId", "movieId", "rating", "timestamp", "title", "genres"
We then randomly split the data into a 90% training set (edx) and a 10% validation set (validation). 

Read in the training dataset, edx, created using the file '0_MovieLens_Data_Wrangling.R' and start to explore this data.
```{r import-data}
edx <- readRDS("movielens_training_data.rds")
validation <- readRDS("movielens_validation_data.rds")
```






# Resources consulted

Introduction to Data Science text book by Rafael A. Irizarry used throughout the certificate program
https://rafalab.github.io/dsbook/

http://re-design.dimiter.eu/?p=767
https://towardsdatascience.com/recommendation-systems-in-the-real-world-51e3948772f3
https://builtin.com/data-science/recommender-systems
https://medium.com/swlh/recommendation-system-for-movies-movielens-grouplens-171d30be334e
For examples of how to bin data and create box plots:
https://www.r-graph-gallery.com/268-ggplot2-boxplot-from-continuous-variable.html
http://adv-r.had.co.nz/Subsetting.html  a nice summary of subsetting

Matrix factorization resources:
https://rpubs.com/vsi/movielens  a prior submission for this  assessment that used the recosystem
https://methods.sagepub.com/dataset/howtoguide/collaborative-filtering-in-steam-2017  a hands on example of the recosystem matrix factorization approach
https://cran.r-project.org/web/packages/recosystem/recosystem.pdf  documentation for recosystem library
https://statr.me/2016/07/recommender-system-using-parallel-matrix-factorization/ recosystem lead maintainer blog
https://cran.r-project.org/web/packages/recosystem/vignettes/introduction.html  an explanation of the recosystem library by Yixuan Qiu, an author of the recosystem and the maintainer

https://rdrr.io/cran/recosystem/man/tune.html  an explantion of tuning parameters


